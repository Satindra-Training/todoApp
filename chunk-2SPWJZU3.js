import{a as O,b as $,c as q,d as Y,e as G,f as z,g as J,h as K}from"./chunk-HTXFG3J2.js";import{B as A,D as I,E as D,F as B,G as N,H as W,I as o,J as r,L as b,M as g,N as v,O as u,P as i,Q as C,R as F,S as T,T as _,U as f,ba as P,ca as j,ha as H,i as R,j as h,ja as V,l as L,m as M,n as k,o as y,r as m,s as p,w as c}from"./chunk-GKNKAI3G.js";var x=class l{constructor(t){this.http=t}__apiURL="https://fakeserver-o4dt.onrender.com";getAllTodos(){return this.http.get(`${this.__apiURL}/todos`)}addTodo(t){return this.http.post(`${this.__apiURL}/todos`,t)}getTodoById(t){return this.http.get(`${this.__apiURL}/todos/${t}`)}updateTodo(t,e){return this.http.put(`${this.__apiURL}/todos/${e}`,t)}deleteTodo(t){return this.http.delete(`${this.__apiURL}/todos/${t}`)}static \u0275fac=function(e){return new(e||l)(L(j))};static \u0275prov=R({token:l,factory:l.\u0275fac,providedIn:"root"})};var S=class{constructor(t,e){this.titleText=t;this.descText=e}};var Z=(l,t)=>t.id;function ee(l,t){if(l&1){let e=b();o(0,"div",8),i(1),o(2,"a",29),g("click",function(){m(e);let a=v();return p(a.onLogout())}),i(3,"Logout"),r(),i(4," | "),o(5,"a",30),i(6,"Add Todos"),r()()}if(l&2){let e=v();c(),F(" Welcome ",e.loggedUser.username," ")}}function te(l,t){if(l&1){let e=b();o(0,"tr")(1,"td")(2,"input",31),g("change",function(){let a=m(e).$implicit,s=v();return p(s.onRadioChange(a.id))}),r()(),o(3,"td"),i(4),r(),o(5,"td"),i(6),r(),o(7,"td"),i(8),r()()}if(l&2){let e=t.$implicit;c(4),C(e.title),c(2),C(e.description),c(2),C(e.created)}}var w=class l{myTodo=new S("","");todoList=[];todoApiService=M(x);myRouter=M(H);populateTodos(){this.todoApiService.getAllTodos().subscribe(t=>{this.todoList=t.filter(e=>{if(e.user_id==this.loggedUser.userid)return e})})}getCurrentDate(){let t=new Date;return`${t.getDate()}-${t.getMonth()+1}-${t.getFullYear()}`}onAddTodo(t){var e={title:this.myTodo.titleText,description:this.myTodo.descText,user_id:localStorage.getItem("ACTIVE_USER_ID"),created:this.getCurrentDate()};console.log(e),this.todoApiService.addTodo(e).subscribe(d=>{d?(alert("One Todo has been added successfully !"),this.populateTodos()):alert("Unable to add Todo Right Now"),t.click()})}selectedTodo={};onRadioChange(t){console.log(t),this.todoApiService.getTodoById(t).subscribe(e=>{this.selectedTodo=e,console.log(this.selectedTodo)})}onUpdateTodo(t){console.log(this.selectedTodo);var e={title:this.selectedTodo.title,description:this.selectedTodo.description,created:this.getCurrentDate(),user_id:localStorage.getItem("ACTIVE_USER_ID")};this.todoApiService.updateTodo(e,this.selectedTodo.id).subscribe(d=>{d?(alert("One Todo Successfully Updated..."),this.populateTodos()):alert("Unable to Update todo right now"),t.click()})}onLogout(){localStorage.clear(),alert("Logged Out Successfull"),this.myRouter.navigateByUrl("users")}loggedUser={username:"",userid:""};onTodoDelete(t){var e=this.selectedTodo.id,d=confirm("Do You want to Delete This Record ?");d&&this.todoApiService.deleteTodo(e).subscribe(a=>{a?(alert("One todo has been removed successully !"),this.populateTodos()):alert("Unable to Remove Todo"),t.click()})}ngOnInit(){localStorage.getItem("ACTIVE_USER_ID")&&(this.loggedUser.userid=localStorage.getItem("ACTIVE_USER_ID"),this.loggedUser.username=localStorage.getItem("ACTIVE_USER")),console.log(this.loggedUser),this.populateTodos()}static \u0275fac=function(e){return new(e||l)};static \u0275cmp=k({type:l,selectors:[["app-todos"]],decls:71,vars:15,consts:[["todoData","ngForm"],["titleText","ngModel"],["descText","ngModel"],["closeBtn",""],["todoInfo","ngForm"],["closeBtn2",""],[1,"card","p-3","m-3"],[1,"table-responsive"],[1,"float-right"],[1,"table","table-hover"],["id","addTodoModal","tabindex","-1",1,"modal"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group"],["type","text","name","titleText","id","titleText","required","",1,"form-control",3,"ngModelChange","ngModel"],["name","descText","id","descText","rows","6","cols","30","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-secondary"],["type","button","type","button",1,"btn","btn-primary",3,"click","disabled"],["id","editDeleteModal","tabindex","-1",1,"modal"],["type","text","name","editTitleText","required","",1,"form-control",3,"ngModelChange","ngModel"],["name","editDescText","rows","6","cols","30","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","button",1,"btn","btn-primary",3,"click","disabled"],["type","button",1,"btn","btn-danger",3,"click"],["href","#",3,"click"],["data-target","#addTodoModal","data-toggle","modal",1,"btn","btn-sm","btn-outline-dark"],["type","radio","data-target","#editDeleteModal","data-toggle","modal","name","r1",3,"change"]],template:function(e,d){if(e&1){let a=b();o(0,"fieldset",6)(1,"legend")(2,"h4"),i(3,"Displaying all Todos:"),r()(),o(4,"div",7),A(5,ee,7,1,"div",8),o(6,"table",9)(7,"tr")(8,"th"),i(9,"#"),r(),o(10,"th"),i(11,"Title:"),r(),o(12,"th"),i(13,"Description:"),r(),o(14,"th"),i(15,"Created:"),r()(),N(16,te,9,3,"tr",null,Z),r()()(),o(18,"div",10)(19,"div",11)(20,"div",12)(21,"div",13)(22,"h5",14),i(23,"Add Todo:"),r(),o(24,"button",15)(25,"span",16),i(26,"\xD7"),r()()(),o(27,"form",null,0)(29,"div",17)(30,"div",18),i(31,"Title: "),o(32,"input",19,1),f("ngModelChange",function(n){return m(a),_(d.myTodo.titleText,n)||(d.myTodo.titleText=n),p(n)}),r()(),o(34,"div",18),i(35,"Description: "),o(36,"textarea",20,2),f("ngModelChange",function(n){return m(a),_(d.myTodo.descText,n)||(d.myTodo.descText=n),p(n)}),r()()(),o(38,"div",21)(39,"button",22,3),i(41,"Close"),r(),o(42,"button",23),g("click",function(){m(a);let n=u(40);return p(d.onAddTodo(n))}),i(43,"Save changes"),r()()()()()(),o(44,"div",24)(45,"div",11)(46,"div",12)(47,"div",13)(48,"h5",14),i(49,"Edit Modal:"),r(),o(50,"button",15)(51,"span",16),i(52,"\xD7"),r()()(),o(53,"form",null,4)(55,"div",17)(56,"div",18),i(57,"Title : "),o(58,"input",25),f("ngModelChange",function(n){return m(a),_(d.selectedTodo.title,n)||(d.selectedTodo.title=n),p(n)}),r()(),o(59,"div",18),i(60,"Description: "),o(61,"textarea",26),f("ngModelChange",function(n){return m(a),_(d.selectedTodo.description,n)||(d.selectedTodo.description=n),p(n)}),r()()(),o(62,"div",21)(63,"button",22,5),i(65,"Close"),r(),o(66,"button",27),g("click",function(){m(a);let n=u(64);return p(d.onUpdateTodo(n))}),i(67,"UPDATE"),r(),i(68," | "),o(69,"button",28),g("click",function(){m(a);let n=u(64);return p(d.onTodoDelete(n))}),i(70,"DELETE"),r()()()()()()}if(e&2){let a=u(28),s=u(33),n=u(37),X=u(54);c(5),B(d.loggedUser.length!=0?5:-1),c(11),W(d.todoList),c(16),D("is-invalid",s.touched&&s.invalid)("is-valid",s.touched&&s.valid),T("ngModel",d.myTodo.titleText),c(4),D("is-invalid",n.touched&&n.invalid)("is-valid",n.touched&&n.valid),T("ngModel",d.myTodo.descText),c(6),I("disabled",a.invalid),c(16),T("ngModel",d.selectedTodo.title),c(3),T("ngModel",d.selectedTodo.description),c(5),I("disabled",X.invalid)}},dependencies:[z,O,$,q,J,G,Y]})};var oe=[{path:"",component:w}],E=class l{static \u0275fac=function(e){return new(e||l)};static \u0275mod=y({type:l});static \u0275inj=h({imports:[V.forChild(oe),V]})};var Q=class l{static \u0275fac=function(e){return new(e||l)};static \u0275mod=y({type:l});static \u0275inj=h({imports:[P,E,K]})};export{Q as TodosModule};
